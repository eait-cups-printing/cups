From 5cc470c8d95df40f32e8a401b2946886c91b03d1 Mon Sep 17 00:00:00 2001
From: Michael R Sweet <msweet@msweet.org>
Date: Fri, 15 Nov 2024 11:55:07 -0500
Subject: [PATCH] Fix make-and-model whitespace trimming (Issue #1096)

---
 CHANGES.md       | 1 +
 cups/ppd-cache.c | 2 ++
 2 files changed, 3 insertions(+)

diff --git a/CHANGES.md b/CHANGES.md
index d7e1f26e9..7415d4540 100644
--- a/CHANGES.md
+++ b/CHANGES.md
@@ -6,6 +6,7 @@ Changes in CUPS v2.4.12 (YYYY-MM-DD)
 ------------------------------------
 
 - Fixed a compressed file error handling bug (Issue #1070)
+- Fixed a bug in the make-and-model whitespace trimming code (Issue #1096)
 - Fixed the default User-Agent string.
 - Fixed a recursion issue in `ippReadIO`.
 
diff --git a/cups/ppd-cache.c b/cups/ppd-cache.c
index a6163a0e1..a3198a795 100644
--- a/cups/ppd-cache.c
+++ b/cups/ppd-cache.c
@@ -3293,6 +3293,8 @@ _ppdCreateFromIPP2(
       mptr --;
       if (*mptr == ' ')
 	*mptr = '\0';
+      else
+        break;
     }
 
     if (!make[0])
-- 
2.47.0

